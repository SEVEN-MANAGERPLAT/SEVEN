<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace=".dao.AccountRecordDao">

    <resultMap type=".entity.AccountRecord" id="AccountRecordMap">
        <result property="accrId" column="ACCR_ID" jdbcType="INTEGER"/>
        <result property="memNum" column="MEM_NUM" jdbcType="VARCHAR"/>
        <result property="phone" column="PHONE" jdbcType="VARCHAR"/>
        <result property="appNum" column="APP_NUM" jdbcType="VARCHAR"/>
        <result property="momey" column="MOMEY" jdbcType="NUMERIC"/>
        <result property="createDate" column="CREATE_DATE" jdbcType="TIMESTAMP"/>
        <result property="remark" column="REMARK" jdbcType="VARCHAR"/>
        <result property="empId" column="EMP_ID" jdbcType="INTEGER"/>
        <result property="costType" column="COST_TYPE" jdbcType="INTEGER"/>
        <result property="isfirst" column="ISFIRST" jdbcType="INTEGER"/>
        <result property="balance" column="BALANCE" jdbcType="NUMERIC"/>
        <result property="state" column="STATE" jdbcType="INTEGER"/>
        <result property="storeId" column="STORE_ID" jdbcType="INTEGER"/>
        <result property="transferCard" column="TRANSFER_CARD" jdbcType="INTEGER"/>
        <result property="royProcess" column="ROY_PROCESS" jdbcType="INTEGER"/>
        <result property="visitType" column="VISIT_TYPE" jdbcType="INTEGER"/>
        <result property="clerkId" column="CLERK_ID" jdbcType="INTEGER"/>
        <result property="operatorId" column="OPERATOR_ID" jdbcType="INTEGER"/>
        <result property="firstCharge" column="FIRST_CHARGE" jdbcType="INTEGER"/>
    </resultMap>

    <!--查询单个-->
    <select id="queryById" resultMap="AccountRecordMap">
        select
          ACCR_ID, MEM_NUM, PHONE, APP_NUM, MOMEY, CREATE_DATE, REMARK, EMP_ID, COST_TYPE, ISFIRST, BALANCE, STATE, STORE_ID, TRANSFER_CARD, ROY_PROCESS, VISIT_TYPE, CLERK_ID, OPERATOR_ID, FIRST_CHARGE
        from samy.account_record
        where ACCR_ID = #{accrId}
    </select>

    <!--查询指定行数据-->
    <select id="queryAllByLimit" resultMap="AccountRecordMap">
        select
          ACCR_ID, MEM_NUM, PHONE, APP_NUM, MOMEY, CREATE_DATE, REMARK, EMP_ID, COST_TYPE, ISFIRST, BALANCE, STATE, STORE_ID, TRANSFER_CARD, ROY_PROCESS, VISIT_TYPE, CLERK_ID, OPERATOR_ID, FIRST_CHARGE
        from samy.account_record
        limit #{offset}, #{limit}
    </select>

    <!--通过实体作为筛选条件查询-->
    <select id="queryAll" resultMap="AccountRecordMap">
        select
          ACCR_ID, MEM_NUM, PHONE, APP_NUM, MOMEY, CREATE_DATE, REMARK, EMP_ID, COST_TYPE, ISFIRST, BALANCE, STATE, STORE_ID, TRANSFER_CARD, ROY_PROCESS, VISIT_TYPE, CLERK_ID, OPERATOR_ID, FIRST_CHARGE
        from samy.account_record
        <where>
            <if test="accrId != null">
                and ACCR_ID = #{accrId}
            </if>
            <if test="memNum != null and memNum != ''">
                and MEM_NUM = #{memNum}
            </if>
            <if test="phone != null and phone != ''">
                and PHONE = #{phone}
            </if>
            <if test="appNum != null and appNum != ''">
                and APP_NUM = #{appNum}
            </if>
            <if test="momey != null">
                and MOMEY = #{momey}
            </if>
            <if test="createDate != null">
                and CREATE_DATE = #{createDate}
            </if>
            <if test="remark != null and remark != ''">
                and REMARK = #{remark}
            </if>
            <if test="empId != null">
                and EMP_ID = #{empId}
            </if>
            <if test="costType != null">
                and COST_TYPE = #{costType}
            </if>
            <if test="isfirst != null">
                and ISFIRST = #{isfirst}
            </if>
            <if test="balance != null">
                and BALANCE = #{balance}
            </if>
            <if test="state != null">
                and STATE = #{state}
            </if>
            <if test="storeId != null">
                and STORE_ID = #{storeId}
            </if>
            <if test="transferCard != null">
                and TRANSFER_CARD = #{transferCard}
            </if>
            <if test="royProcess != null">
                and ROY_PROCESS = #{royProcess}
            </if>
            <if test="visitType != null">
                and VISIT_TYPE = #{visitType}
            </if>
            <if test="clerkId != null">
                and CLERK_ID = #{clerkId}
            </if>
            <if test="operatorId != null">
                and OPERATOR_ID = #{operatorId}
            </if>
            <if test="firstCharge != null">
                and FIRST_CHARGE = #{firstCharge}
            </if>
        </where>
    </select>

    <!--新增所有列-->
    <insert id="insert" keyProperty="accrId" useGeneratedKeys="true">
        insert into samy.account_record(MEM_NUM, PHONE, APP_NUM, MOMEY, CREATE_DATE, REMARK, EMP_ID, COST_TYPE, ISFIRST, BALANCE, STATE, STORE_ID, TRANSFER_CARD, ROY_PROCESS, VISIT_TYPE, CLERK_ID, OPERATOR_ID, FIRST_CHARGE)
        values (#{memNum}, #{phone}, #{appNum}, #{momey}, #{createDate}, #{remark}, #{empId}, #{costType}, #{isfirst}, #{balance}, #{state}, #{storeId}, #{transferCard}, #{royProcess}, #{visitType}, #{clerkId}, #{operatorId}, #{firstCharge})
    </insert>

    <!--通过主键修改数据-->
    <update id="update">
        update samy.account_record
        <set>
            <if test="memNum != null and memNum != ''">
                MEM_NUM = #{memNum},
            </if>
            <if test="phone != null and phone != ''">
                PHONE = #{phone},
            </if>
            <if test="appNum != null and appNum != ''">
                APP_NUM = #{appNum},
            </if>
            <if test="momey != null">
                MOMEY = #{momey},
            </if>
            <if test="createDate != null">
                CREATE_DATE = #{createDate},
            </if>
            <if test="remark != null and remark != ''">
                REMARK = #{remark},
            </if>
            <if test="empId != null">
                EMP_ID = #{empId},
            </if>
            <if test="costType != null">
                COST_TYPE = #{costType},
            </if>
            <if test="isfirst != null">
                ISFIRST = #{isfirst},
            </if>
            <if test="balance != null">
                BALANCE = #{balance},
            </if>
            <if test="state != null">
                STATE = #{state},
            </if>
            <if test="storeId != null">
                STORE_ID = #{storeId},
            </if>
            <if test="transferCard != null">
                TRANSFER_CARD = #{transferCard},
            </if>
            <if test="royProcess != null">
                ROY_PROCESS = #{royProcess},
            </if>
            <if test="visitType != null">
                VISIT_TYPE = #{visitType},
            </if>
            <if test="clerkId != null">
                CLERK_ID = #{clerkId},
            </if>
            <if test="operatorId != null">
                OPERATOR_ID = #{operatorId},
            </if>
            <if test="firstCharge != null">
                FIRST_CHARGE = #{firstCharge},
            </if>
        </set>
        where ACCR_ID = #{accrId}
    </update>

    <!--通过主键删除-->
    <delete id="deleteById">
        delete from samy.account_record where ACCR_ID = #{accrId}
    </delete>

</mapper>